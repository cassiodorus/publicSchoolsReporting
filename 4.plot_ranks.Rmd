---
title: "publicSchoolsReporting Project - NCforum LSFR"
author: "D. Hopp"
date: "November 2017"
output:
  html_document: default
---

```{r, warning=FALSE, message=FALSE, echo=FALSE}
require(rprojroot)
require(reshape2)
require(magrittr)
require(plyr)
require(tidyverse)
require(cowplot)
require(grid)
require(readr)
require(taRifx)
require(R.utils)
require(ggthemes)
require(emdist)
require(rlist)
require(MASS)
require(Hmisc)
require(grid)
require(scales)
```

```{r fetch, echo=FALSE}
load("4.RData")
```  
## Page 3 and the Student SPending Average  

```{r fn_plt_ncforum_2017_LSFS_spending_2, echo=FALSE}
plt <- fn_plt_ncforum_2017_LSFS_spending_2()
av <- round(2682096826/1500399)
```  

This is a modification of the graphic on page 3 of the 2017 Local Schoool Finance Report. The counties have been rearranged in order of their local current spending per student. However, the main issue addressed here is the use in the page 3 plot of the arithmetic average of the per student spendings, which is $1537 as shown in column 8 of Table 2. That calculation, based on the data in Table 2, results in some confusion because it is the average of averages, which is not a correct procedure. The true average expendiure per student is the total expenditure ($2,682,096,826 as shown in column 7 of Table 2) divided by the total ADM (1,500,399 as shown in column 8 of Table 2), which is $`r av`.  The lower figure, $1537, is $250 less than the arithmetically correct figure of $`r av`.   

Neither of those figures is of any particular utility, in part because the underlying distribution of per student expenditures is not symmetric, so the average is not very descriptive. Additionally, the upper figure ($`r av`) is heavily influenced by the two largest district, Wake and Mecklenburg. The average without those two districts is $`r round(sum(as.numeric(unlist(df_ncforum_2017_LSFS_T2 %>% dplyr::filter(!(County %in% c("Wake","Mecklenburg"))) %>% dplyr::select(TCS))))/sum(as.numeric(unlist(df_ncforum_2017_LSFS_T2 %>% dplyr::filter(!(County %in% c("Wake","Mecklenburg"))) %>% dplyr::select(FADM)))),digits=0)`.  A better measure is the median of the county expenditures,  $`r round(median(df_ncforum_2017_LSFS_T2$TCSpADM),digits=0)`.  

```{r plot_ranks, fig.height=13, fig.width=9, echo=FALSE}
plt
```  

## Page 8 and the K-12 Spending Plot  

The K-12 Spending plot is contrary to statistical best practices in that it starts at about 25% rather than 0%. This leads to easy misinterpretation of the message, since the change from 52.5% to 37.8% appears larger than it actually is. The significance is that the Report can be criticized for bias. The properly dispayed figure woule be more like the one below.  









```{r fn_plotly_ncforum_2017_LSFS_T2_1, echo=FALSE}
# for future use:
plt <- fn_plotly_ncforum_2017_LSFS_T2_1()
```  

